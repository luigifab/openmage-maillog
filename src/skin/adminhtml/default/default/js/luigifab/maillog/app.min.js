/*!
 * Copyright 2015-2021 | Fabrice Creuzot (luigifab) <code~luigifab~fr>
 * https://www.luigifab.fr/openmage/maillog
 * This program is free software, you can redistribute it or modify
 * it under the terms of the GNU General Public License (GPL).
 */
window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t,n){for(t=t||window,n=0;n<this.length;n++)e.call(t,this[n],n,this)});var maillog=new function(){"use strict";this.template=null,this.nextIdx=0,this.init=function(){var e,t,n,o,l;document.getElementById("maillog_sync_bounces_stats_customer")?(console.info("maillog.app - hello"),e=document.getElementById("maillog_sync_bounces_stats_customer"),t=document.getElementById("maillog_sync_bounces_stats_bounce"),n=document.getElementById("maillog_sync_unsubscribers_stats_subscriber"),o=parseInt(e.textContent.trim(),10),l=parseInt(t.textContent.trim(),10),t.textContent+=" ("+Math.floor(100*l/o)+" %)",o=parseInt(e.textContent.trim(),10),l=parseInt(n.textContent.trim(),10),n.textContent+=" ("+Math.floor(100*l/o)+" %)"):(o=document.getElementById("row_maillog_directives_general_special_config"))&&(console.info("maillog.app - hello"),o=o.querySelector("tr.template"),this.template=o.innerHTML,this.nextIdx=parseInt(o.getAttribute("data-next"),10),o.remove())},this.add=function(e){var t=document.getElementById("maillog_sync_"+e+"_mapping_system"),n=document.getElementById("maillog_sync_"+e+"_mapping_openmage"),o=document.getElementById("maillog_sync_"+e+"_mapping_config");0<t.value.length&&0<n.value.length&&(o.value=(o.value+"\n"+t.value+":"+n.value).trim(),o.scrollTop=o.scrollHeight,t.selectedIndex=0,n.selectedIndex=0,this.mark(e))},this.mark=function(e){var t=document.getElementById("maillog_sync_"+e+"_mapping_config").value;document.getElementById("maillog_sync_"+e+"_mapping_system").querySelectorAll("option").forEach(function(e){-1<t.indexOf("\n"+e.value+":")||0===t.indexOf(e.value+":")?e.setAttribute("class","has"):e.removeAttribute("class")}),document.getElementById("maillog_sync_"+e+"_mapping_openmage").querySelectorAll("option").forEach(function(e){-1<t.indexOf(":"+e.value)?e.setAttribute("class","has"):e.removeAttribute("class")})},this.decode=function(e){return decodeURIComponent(escape(self.atob(e)))},this.iframe=function(t){try{t.removeAttribute("onload"),t.contentDocument.querySelector("body").parentNode.innerHTML=this.decode(t.firstChild.nodeValue),t.style.height=t.contentDocument.querySelector("body").scrollHeight+"px",self.setTimeout(function(){var e=document.querySelector("div.content iframe");e.style.height=e.contentDocument.querySelector("body").scrollHeight+"px"},1e3)}catch(e){t.contentDocument.querySelector("body").textContent=e}},this.resetLifetime=function(e,t){(e=e.parentNode).querySelectorAll("select")[0].selectedIndex=0,e.querySelectorAll("select")[1].selectedIndex=0,e.querySelectorAll("input")[0].value=t.toLowerCase(),e.querySelectorAll("input")[1].value="#000000"},this.removeLifetime=function(e){confirm(Translator.translate("Are you sure?"))&&e.parentNode.remove()},this.addPicture=function(e){for(var t=document.createElement("tr"),n=e.parentNode;"TABLE"!==n.nodeName;)n=n.parentNode;n=n.querySelector("tbody"),t.setAttribute("class","added"),t.innerHTML=this.template.replace(/IIDDXX/g,this.nextIdx).replace(/KKEEYY/g,"1"),n.appendChild(t),this.nextIdx+=1},this.deletePicture=function(e){var t=!0;e.parentNode.parentNode.querySelectorAll("input").forEach(function(e){t=t&&""==e.value}),(t||confirm(Translator.translate("Are you sure?")))&&e.parentNode.parentNode.remove()},this.addBreak=function(e,t){var n=document.createElement("ul"),e=e.parentNode.parentNode.parentNode.querySelector("ul");n.innerHTML=this.template.replace(/IIDDXX/g,t).replace(/KKEEYY/g,e.querySelectorAll("li").length.toString()),e.appendChild(n.querySelector("li.breakpoint"))},this.deleteBreak=function(e){var t=!0;e.parentNode.parentNode.querySelectorAll("input").forEach(function(e){t=t&&""==e.value}),(t||confirm(Translator.translate("Are you sure?")))&&e.parentNode.parentNode.remove()}};"function"==typeof self.addEventListener&&self.addEventListener("load",maillog.init.bind(maillog));
//# sourceMappingURL=app.min.js.map