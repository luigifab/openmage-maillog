{"version":3,"sources":["app.js"],"sourcesContent":["/**\n * Created J/03/12/2015\n * Updated V/22/12/2023\n *\n * Copyright 2015-2024 | Fabrice Creuzot (luigifab) <code~luigifab~fr>\n * Copyright 2015-2016 | Fabrice Creuzot <fabrice.creuzot~label-park~com>\n * Copyright 2017-2018 | Fabrice Creuzot <fabrice~reactive-web~fr>\n * Copyright 2020-2023 | Fabrice Creuzot <fabrice~cellublue~com>\n * https://github.com/luigifab/openmage-maillog\n *\n * This program is free software, you can redistribute it or modify\n * it under the terms of the GNU General Public License (GPL) as published\n * by the free software foundation, either version 2 of the license, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but without any warranty, without even the implied warranty of\n * merchantability or fitness for a particular purpose. See the\n * GNU General Public License (GPL) for more details.\n */\n\nif (window.NodeList && !NodeList.prototype.forEach) {\n\tNodeList.prototype.forEach = function (callback, that, i) {\n\t\tthat = that || window;\n\t\tfor (i = 0; i < this.length; i++)\n\t\t\tcallback.call(that, this[i], i, this);\n\t};\n}\n\nif (!Element.prototype.closest) {\n\tif (!Element.prototype.matches)\n\t    Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\tElement.prototype.closest = function (s) {\n\t\tvar el = this;\n\t\tif (!document.documentElement.contains(el))\n\t\t\treturn null;\n\t\tdo {\n\t\t\tif (el.matches(s))\n\t\t\t\treturn el;\n\t\t\tel = el.parentElement || el.parentNode;\n\t\t} while (el !== null && el.nodeType == 1);\n\t\treturn null;\n\t};\n}\n\nvar maillog = new (function () {\n\n\t\"use strict\";\n\tthis.template = null;\n\tthis.nextIdx  = 0;\n\n\tthis.init = function () {\n\n\t\tvar elem, customer, bounce, subscriber, i, j;\n\n\t\tif (document.getElementById('maillog_sync_bounces_stats_customer')) {\n\n\t\t\tconsole.info('maillog.app - hello');\n\t\t\tcustomer   = document.getElementById('maillog_sync_bounces_stats_customer');\n\t\t\tbounce     = document.getElementById('maillog_sync_bounces_stats_bounce');\n\t\t\tsubscriber = document.getElementById('maillog_sync_unsubscribers_stats_subscriber');\n\n\t\t\ti = parseInt(customer.textContent.trim(), 10);\n\t\t\tj = parseInt(bounce.textContent.trim(), 10);\n\t\t\tbounce.textContent += ' (' + Math.floor(j * 100 / i) + ' %)';\n\n\t\t\ti = parseInt(customer.textContent.trim(), 10);\n\t\t\tj = parseInt(subscriber.textContent.trim(), 10);\n\t\t\tsubscriber.textContent += ' (' + Math.floor(j * 100 / i) + ' %)';\n\t\t}\n\t\telse if (elem = document.getElementById('row_maillog_directives_general_special_config')) {\n\n\t\t\tconsole.info('maillog.app - hello');\n\t\t\telem = elem.querySelector('tr.template');\n\n\t\t\tthis.template = elem.innerHTML;\n\t\t\tthis.nextIdx  = parseInt(elem.getAttribute('data-next'), 10);\n\n\t\t\telem.remove();\n\t\t}\n\t};\n\n\tthis.add = function (code) {\n\n\t\tvar sys = document.getElementById('maillog_sync_' + code + '_mapping_system'),\n\t\t    mag = document.getElementById('maillog_sync_' + code + '_mapping_openmage'),\n\t\t    cnf = document.getElementById('maillog_sync_' + code + '_mapping_config');\n\n\t\tif ((sys.value.length > 0) && (mag.value.length > 0)) {\n\t\t\tcnf.value = (cnf.value + '\\n' + sys.value + ':' + mag.value).trim();\n\t\t\tcnf.scrollTop = cnf.scrollHeight;\n\t\t\tsys.selectedIndex = 0;\n\t\t\tmag.selectedIndex = 0;\n\t\t\tthis.mark(code);\n\t\t}\n\t};\n\n\tthis.mark = function (code) {\n\n\t\tvar fields = document.getElementById('maillog_sync_' + code + '_mapping_config').value;\n\n\t\tdocument.getElementById('maillog_sync_' + code + '_mapping_system').querySelectorAll('option').forEach(function (elem) {\n\t\t\tif ((fields.indexOf('\\n' + elem.value + ':') > -1) || (fields.indexOf(elem.value + ':') === 0))\n\t\t\t\telem.setAttribute('class', 'has');\n\t\t\telse\n\t\t\t\telem.removeAttribute('class');\n\t\t});\n\n\t\tdocument.getElementById('maillog_sync_' + code + '_mapping_openmage').querySelectorAll('option').forEach(function (elem) {\n\t\t\tif (fields.indexOf(':' + elem.value) > -1)\n\t\t\t\telem.setAttribute('class', 'has');\n\t\t\telse\n\t\t\t\telem.removeAttribute('class');\n\t\t});\n\t};\n\n\tthis.decode = function (data) {\n\n\t\t// utf-8 avec Webkit (https://stackoverflow.com/q/3626183)\n\t\treturn decodeURIComponent(escape(atob(data)));\n\t};\n\n\tthis.iframe = function (elem) {\n\n\t\ttry {\n\t\t\telem.removeAttribute('onload');\n\t\t\telem.contentDocument.querySelector('body').parentNode.innerHTML = this.decode(elem.firstChild.nodeValue);\n\t\t\telem.style.height = elem.contentDocument.querySelector('body').scrollHeight + 'px';\n\t\t\tself.setTimeout(function () {\n\t\t\t\tvar elem = document.querySelector('div.content iframe');\n\t\t\t\telem.style.height = elem.contentDocument.querySelector('body').scrollHeight + 'px';\n\t\t\t}, 1000);\n\t\t}\n\t\tcatch (e) {\n\t\t\telem.contentDocument.querySelector('body').textContent = e;\n\t\t}\n\t};\n\n\tthis.resetValues = function (elem) {\n\n\t\telem = elem.closest('li, tr');\n\t\telem.querySelectorAll('select, input').forEach(function (input) {\n\n\t\t\tif (input.nodeName === 'SELECT') {\n\t\t\t\tinput.selectedIndex = input.querySelector('option[selected]').index;\n\t\t\t}\n\t\t\telse if (input.color) {\n\t\t\t\tinput.value = input.defaultValue.toUpperCase();\n\t\t\t\tinput.color.importColor();\n\t\t\t}\n\t\t\telse if (input.jscolor) {\n\t\t\t\tinput.value = input.defaultValue.toUpperCase();\n\t\t\t\tinput.jscolor.fromString(input.value);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tinput.value = input.defaultValue;\n\t\t\t}\n\n\t\t\tif (input.classList.contains('h') && (input = input.closest('li').querySelector('div.rt')))\n\t\t\t\tthis.ratioPicture(input);\n\n\t\t}, this); // pour que ci-dessus this = this\n\t};\n\n\tthis.defaultLifetime = function (elem, bg, tt) {\n\n\t\telem = elem.parentNode;\n\t\telem.querySelectorAll('select')[0].selectedIndex = 0;\n\t\telem.querySelectorAll('select')[1].selectedIndex = 0;\n\n\t\tvar input = elem.querySelectorAll('input')[0];\n\t\tinput.value = bg.toUpperCase();\n\t\tif (input.color)\n\t\t\tinput.color.importColor();\n\t\telse\n\t\t\tinput.jscolor.fromString(input.value);\n\n\t\tinput = elem.querySelectorAll('input')[1];\n\t\tinput.value = tt.toUpperCase();\n\t\tif (input.color)\n\t\t\tinput.color.importColor();\n\t\telse\n\t\t\tinput.jscolor.fromString(input.value);\n\t};\n\n\tthis.removeLifetime = function (elem) {\n\n\t\tif (confirm(Translator.translate('Are you sure?')))\n\t\t\telem.parentNode.remove();\n\t};\n\n\tthis.addPicture = function (elem) {\n\n\t\tvar tpl = document.createElement('tr'), root = elem.parentNode, tr, td;\n\t\twhile (root.nodeName !== 'TABLE')\n\t\t\troot = root.parentNode;\n\n\t\troot = root.querySelector('tbody');\n\n\t\ttpl.setAttribute('class', 'added');\n\t\ttpl.setAttribute('data-idx', this.nextIdx.toString());\n\t\ttpl.innerHTML = this.template.\n\t\t\treplace(/IIDDXX/g, this.nextIdx).\n\t\t\treplace(/KKEEYY/g, '1');\n\n\t\tif (!root.querySelector('tr.new')) {\n\t\t\ttr = document.createElement('tr');\n\t\t\ttr.setAttribute('class', 'letter new');\n\t\t\ttd = document.createElement('td');\n\t\t\ttd.setAttribute('colspan', '2');\n\t\t\ttd.setAttribute('class', 'a-center');\n\t\t\ttd.appendChild(document.createTextNode('-'));\n\t\t\ttr.appendChild(td);\n\t\t\troot.appendChild(tr);\n\t\t}\n\n\t\troot.appendChild(tpl);\n\t\ttpl.querySelector('input').focus();\n\t\tthis.nextIdx += 1;\n\n\t\treturn tpl;\n\t};\n\n\tthis.ratioPicture = function (elem) {\n\n\t\t// @see https://stackoverflow.com/a/11832950/2980105\n\t\tvar root = elem.closest('li'), w = parseInt(root.querySelector('input.w').value, 10), h = parseInt(root.querySelector('input.h').value, 10);\n\t\troot.querySelector('div.rt').innerHTML = (isNaN(w) || isNaN(h) || (w == 0) || (h == 0)) ? '' :\n\t\t\t(Math.round((w / h + (Number.EPSILON ? Number.EPSILON : 0)) * 100) / 100).toLocaleString();\n\t};\n\n\tthis.copyPicture = function (elem, json) {\n\n\t\tvar config = {}, name;\n\n\t\telem.closest('tr').querySelectorAll('input').forEach(function (input) {\n\t\t\tname = input.name.replace('groups[general][fields][special_config][value][', '').replace(/]\\[/g, ':').replace(']', '');\n\t\t\tname = name.substring(name.indexOf(':') + 1);\n\t\t\tconfig[name] = input.value;\n\t\t});\n\n\t\tconfig = JSON.stringify(config);\n\t\tif (json === true) {\n\t\t\treturn config;\n\t\t}\n\t\telse if (typeof navigator.clipboard == 'object') {\n\t\t\tnavigator.clipboard.writeText(config).then(function () {\n\t\t\t\telem.closest('tr').classList.add('maillog-flash');\n\t\t\t\tself.setTimeout(function () {\n\t\t\t\t\telem.closest('tr').classList.remove('maillog-flash');\n\t\t\t\t}, 1000);\n\t\t\t}, function () {\n\t\t\t\tself.prompt('copy', config);\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tself.prompt('copy', config);\n\t\t}\n\t};\n\n\tthis.pastePicture = function (elem, ev, jsonOnly) {\n\n\t\tvar idx = 1, config, root, line;\n\t\tjsonOnly = jsonOnly === true;\n\n\t\ttry {\n\t\t\tconfig = JSON.parse((ev.clipboardData || window.clipboardData).getData('text'));\n\t\t\tev.preventDefault();\n\t\t}\n\t\tcatch (e) {\n\t\t\tif (jsonOnly) {\n\t\t\t\tconsole.error(e);\n\t\t\t\tev.preventDefault();\n\t\t\t\telem.value = '';\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// soit c'est collé dans l'input du tfoot (on cherche donc le bon input.cde)\n\t\telem.closest('table').querySelectorAll('input.cde').forEach(function (input) {\n\t\t\tif (input.value == config.c)\n\t\t\t\troot = input.closest('tr');\n\t\t});\n\n\t\t// soit c'est collé dans un des input.cde du tbody\n\t\tif (!root && elem.classList.contains('cde'))\n\t\t\troot = elem.closest('tr');\n\n\t\t// soit c'est un ajout, soit c'est un remplacement\n\t\tif (!root)\n\t\t\troot = this.addPicture(document.querySelector('button.add.picture'));\n\t\telse if (!confirm(Translator.translate('Are you sure?') + ' (paste/replace picture ' + config.c + ')'))\n\t\t\treturn;\n\n\t\troot.querySelector('input.cde').value = config.c;\n\t\troot.querySelector('input.cmt').value = config.d;\n\t\troot.querySelector('li.default input.w').value = config['0:w'];\n\t\troot.querySelector('li.default input.h').value = config['0:h'];\n\t\tthis.ratioPicture(root.querySelector('li.default'));\n\n\t\troot.querySelectorAll('li.breakpoint').forEach(function (elem) { elem.remove(); });\n\t\twhile (config[idx + ':b']) {\n\t\t\tline = this.addBreak(root.querySelector('button.add.break'), false);\n\t\t\tline.querySelector('input.b').value = config[idx + ':b'];\n\t\t\tline.querySelector('input.w').value = config[idx + ':w'];\n\t\t\tline.querySelector('input.h').value = config[idx + ':h'];\n\t\t\tthis.ratioPicture(line);\n\t\t\tidx++;\n\t\t}\n\n\t\tself.scrollTo(0, root.getBoundingClientRect().top + self.scrollY - 150);\n\t\troot.querySelector('input').focus();\n\n\t\troot.closest('tr').classList.add('maillog-flash');\n\t\tself.setTimeout(function () {\n\t\t\troot.closest('tr').classList.remove('maillog-flash');\n\t\t}, 1000);\n\t};\n\n\tthis.removePicture = function (elem) {\n\n\t\tvar empty = true;\n\t\telem.closest('tr').querySelectorAll('input').forEach(function (input) { empty = empty && (input.value == ''); });\n\n\t\tif (empty || confirm(Translator.translate('Are you sure?') + ' (remove picture)'))\n\t\t\telem.closest('tr').remove();\n\t};\n\n\tthis.addBreak = function (elem, focus) {\n\n\t\tvar tpl = document.createElement('ul'), ul = elem.closest('td').querySelector('ul');\n\n\t\ttpl.innerHTML = this.template.\n\t\t\treplace(/IIDDXX/g, elem.closest('tr').getAttribute('data-idx')).\n\t\t\treplace(/KKEEYY/g, ul.querySelectorAll('li').length.toString());\n\n\t\ttpl = tpl.querySelector('li.breakpoint');\n\t\tul.appendChild(tpl);\n\n\t\tif (focus !== false)\n\t\t\ttpl.querySelector('input').focus();\n\n\t\treturn tpl;\n\t};\n\n\tthis.removeBreak = function (elem) {\n\n\t\tvar empty = true;\n\t\telem.closest('li').querySelectorAll('input').forEach(function (input) { empty = empty && (input.value == ''); });\n\n\t\tif (empty || confirm(Translator.translate('Are you sure?') + ' (remove breakpoint)'))\n\t\t\telem.closest('li').remove();\n\t};\n\n})();\n\nif (typeof self.addEventListener == 'function')\n\tself.addEventListener('load', maillog.init.bind(maillog));"],"names":["window","NodeList","prototype","forEach","callback","that","i","this","length","call","Element","closest","matches","msMatchesSelector","webkitMatchesSelector","s","el","document","documentElement","contains","parentElement","parentNode","nodeType","maillog","template","nextIdx","init","customer","bounce","subscriber","j","getElementById","console","info","parseInt","textContent","trim","Math","floor","elem","querySelector","innerHTML","getAttribute","remove","add","code","sys","mag","cnf","value","scrollTop","scrollHeight","selectedIndex","mark","fields","querySelectorAll","indexOf","setAttribute","removeAttribute","decode","data","decodeURIComponent","escape","atob","iframe","contentDocument","firstChild","nodeValue","style","height","self","setTimeout","e","resetValues","input","nodeName","index","color","defaultValue","toUpperCase","importColor","jscolor","fromString","classList","ratioPicture","defaultLifetime","bg","tt","removeLifetime","confirm","Translator","translate","addPicture","td","tpl","createElement","root","toString","replace","tr","appendChild","createTextNode","focus","w","h","isNaN","round","Number","EPSILON","toLocaleString","copyPicture","json","name","config","substring","JSON","stringify","navigator","clipboard","writeText","then","prompt","pastePicture","ev","jsonOnly","line","idx","parse","clipboardData","getData","preventDefault","error","c","d","addBreak","scrollTo","getBoundingClientRect","top","scrollY","removePicture","empty","ul","removeBreak","addEventListener","bind"],"mappings":"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"}